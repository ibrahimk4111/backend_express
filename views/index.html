<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <title>Home Page</title>
  </head>
  <body class="p-5">
    <ul>
      <li><a href="/">Home</a></li>
      <li>
        <a href="/users" target="_blank" referrerpolicy="no-referrer">Users</a>
      </li>
    </ul>

    <h1>Form for MVC practice</h1>

    <!-- form  -->
    <form action="/users" method="POST">
      <input type="text" name="name" placeholder="your name" />
      <input type="text" name="email" placeholder="ibrahim@gmail.com" />
      <input type="number" name="age" placeholder="age" />
      <button type="submit">create user</button>
    </form>

    <!-- showcase section -->
    <table class="table table-striped mt-5">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Age</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody class="tableBody"></tbody>
    </table>

    <script>
      const tableBody = document.querySelector(".tableBody");

      const url = "https://backend-express-server.onrender.com/users";
      // const url = "http://localhost:8800/users";
      fetch(url)
        .then((res) => res.json())
        .then((datas) => tableRows(datas));

      const tableRows = (datas) => {
        console.log(datas);
        let htmlData = "";
        datas.map((data, index) => {
          const tableRow = `
            <tr>
              <th scope="row">${index + 1}</th>
              <td>${data.name}</td>
              <td>${data.email}</td>
              <td>${data.age}</td>
              <td class=" d-flex gap-4 "><a href="#"><i class="fa-regular fa-pen-to-square "></i></a> <a href="#"><i class="fa-solid fa-trash-can"></i></a></td>
            </tr>
          `;
          htmlData += tableRow;
        });

        tableBody.innerHTML = htmlData;
      };
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
